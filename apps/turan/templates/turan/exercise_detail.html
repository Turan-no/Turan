{% extends "turan/event_detail.html" %}
{% load i18n %}
{% load turan_extras %}
{% block title %}
{{block.super}}
{{ object }}, {{ object.date }}
{% endblock %}
{% block extramenu %}
{{ block.super }}
{% ifequal user object.user %}
        {% if object.sensor_file %}
        <li class="modify"><a href="{% url exercise_parse object.id %}">{% trans "Reparse" %}</a></li>
        {% endif %}
        <li class="modify"><a href="{% url exercise_update object.id %}">{% trans "Modify" %}</a></li>
        <li class="modify delete"><a href="{% url exercise_delete object.id %}">{% trans "Delete" %}</a></li>
{% else %}
{% if user.is_superuser %}
        {% if object.sensor_file %}
            <li class="modify"><a href="{% url exercise_parse object.id %}">{% trans "Reparse" %}</a></li>
        {% endif %}
{% endif %}
{% endifequal %}
{% endblock%}
{% block graph %}
{% ifnotequal object.exercisedetail_set.count 0 %}
<script type="text/javascript">
    /* Colors in use for lots of zone related stuffs */
    var colors = ["rgb(240,240,240)", "rgb(204,204,204)", "rgb(51,102,255)", "rgb(102,204,0)", 
        "rgb(255,153,0)", "rgb(255,0,0)", "rgb(255,0,0)"];
</script>
<div id="tabs">
    <ul>
        <li class="selected" id="tabs-select-1">{% trans "Graph" %}</li>
        <li id="tabs-select-2">{% trans "Comments" %}</li>
        {% if intervals %}
        <li id="tabs-select-3">{% trans "Intervals" %}</li>
        {% endif %}
        <li id="tabs-select-4">{% trans "Zones" %}</li>
        <li id="tabs-select-5">{% trans "Freqs" %}</li>
    {% ifequal object.exercise_type.slopes 1 %}
    {% if slopes %}
        <li id="tabs-select-6">{% trans "Slopes" %}</li>
    {% endif %}
    {% endifequal %}
    {% ifequal object.exercise_type.altitude 1 %}
        <li id="tabs-select-7">{% trans "Inclinedata" %}</li>
    {% endifequal %}
    <li id="tabs-select-9">{% trans "Best Efforts" %}</li>
    </ul>
    <div id="tabs-1" class="graph visible">
        {% include "turan/exercise/graph.html" %}
    </div>
    <div id="tabs-2">
            {% include "turan/commentform.html" %}
    </div>
    {% if intervals %}
    <div id="tabs-3" class="interval_tab">
        {% include "turan/exercise/interval_tab.html" %}
    </div>
    {% endif %}
    <div id="tabs-4" class="zone_tab">
        {% include "turan/exercise/zone_tab.html" %}
    </div>
    <div id="tabs-5" class="hrhzone_tab">
        {% include "turan/exercise/hrhzone_tab.html" %}
    </div>
    {% ifequal object.exercise_type.slopes 1 %}
    {% if slopes %}
        {% include "turan/exercise/slope_tab.html" %}
    {% endif %}
    {% endifequal %}
    {% ifequal object.exercise_type.altitude 1 %}
    <div id="tabs-7">
        <div id="gradientzonediv" style="width:900px;height:400px; float: right;"></div>
        <div id="gradientzonetable" style="width:1px; height: 400px;"></div>
        {% include "turan/exercise/gradient_tab.html" %}
        {% include "turan/exercise/incline_tab.html" %}
    </div>
    {% endifequal %}
    <div id="tabs-9">
        {% include "turan/exercise/best_effort_tab.html" %}
    </div>
</div>
<script type="text/javascript">
    function selectTab(evt) {
        var id = evt.target.id;
        id = "tabs-" + id.split('-')[2];
        $('#tabs div.visible').removeClass('visible');
        $('#tabs div#' + id).addClass('visible');
        $('#tabs>ul>li').removeClass('selected');
        $(this).addClass('selected');
    }
    $('#tabs>ul>li').each(function () {
        $(this).bind("click", selectTab);
    });
    $('.zoom-select').each(function () {
        $(this).bind("click", selectTab);
    });
var commentcount = $('.bulk').size();
$('#tabs-select-2').text('{% trans "Comments" %} (' + commentcount + ')');


</script>
{% endifnotequal %}
{% endblock %}
