{% load i18n %}
{% load l10n %}
{% load turan_extras %}

<h3>{% trans "Percentage of time spent in different HR, colored by zones" %}</h3>
<div id="hrhzonediv" style="width:900px;height:400px; "></div>

{% if powerfreqs %}
<h3>{% trans "Power by time" %}</h3>
<div id="powerfreqdiv" style="width:900px;height:400px; "></div>
{% endif %}

{% if cadfreqs %}
<h3>{% trans "Cadence by time"%}</h3>
<div id="cadfreqdiv" style="width:900px;height:400px; "></div>
{% endif %}

{% if speedfreqs %}
<h3>{% trans "Speed by time"%}</h3>
<div id="speedfreqdiv" style="width:900px;height:400px; "></div>
{% endif %}

<script type="text/javascript">
    {% localize off %}
    $(function () {
        var hrhzonedata = [
            {% for zone in hrhzones%}
            {
            {% if zone.items %}
                data: [{% for hr, percent in zone.items %}[{{ hr }},{{ percent }}],{% endfor %} ],
                bars: { show: true},
                color: colors[{{ forloop.counter0 }}]
            {% endif %}
            }
            {% if not forloop.last%},{%endif%}
            {% endfor %}
        ];

        {% if powerfreqs %}
        var powerfreqdata = [
            {
                data: [
                    {% for val in powerfreqs.items%}[{{val.0}},{{val.1}}]{% if not forloop.last%},{%endif%}{% endfor %}
                ],
                bars: { show: true},
                label: "{% trans "Power" %}",
                color: 5
            }
        ];
        {% endif %}

        {% if cadfreqs %}
        var cadfreqdata = [
            {
                data: [{% for val in cadfreqs.items%}[{{val.0}},{{val.1}}]{% if not forloop.last%},{%endif%}{% endfor %}],
                bars: { show: true},
                label: "{% trans "Cadence" %}",
                color: 1
            }
        ];
        {% endif %}

        {% if speedfreqs %}
        var speedfreqdata = [
            {
                data: [{% for val in speedfreqs.items%}[{{val.0}},{{val.1}}]{% if not forloop.last%},{%endif%}{% endfor %}],
                bars: { show: true },
                label: "{% trans "Speed" %}",
                color: 0
            }
        ];
        {% endif %}

        var options = { 
            yaxis: { tickFormatter: axisformatters.duration },
            legend: {
                position: "nw",
                noColumns: 0,
            }
        };

        $.plot($("#hrhzonediv"), hrhzonedata, {});

        {% if powerfreqs %}
        $.plot($("#powerfreqdiv"), powerfreqdata, options);
        {% endif %}

        {% if cadfreqs %}
        $.plot($("#cadfreqdiv"), cadfreqdata, options);
        {% endif %}

        {% if speedfreqs %}
        $.plot($("#speedfreqdiv"), speedfreqdata, options);
        {% endif %}
    });
{% endlocalize %}
</script>
