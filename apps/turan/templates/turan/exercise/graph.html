{% load i18n %}
<p style="float: right;" id="choices">{% trans "Show" %}:</p>
<div id="tripdiv_legend" style="width:100px;height:400px; float: right;"></div>
<div id="tripdiv" style="width:750px;height:400px; background: white;"></div>
<div class="averages" id="averages">
    <h4 style="display: none">{% trans "Selected min/max/avg" %}</h4>
    <ul><li></li></ul>
    <hr class="clear" />
</div>

<script id="source" type="text/javascript" src="{{ MEDIA_URL }}turan/graphplotter.js"></script>
<script type="text/javascript">
    function evaluate(y,threshold) { 
        return y < threshold;
    }
    var constraint0 = {
        threshold: {{ max_hr }}*0.6,
        color: "rgb(240,240,240)",
        evaluate : evaluate
    }
    var constraint1 = {
        threshold: {{ max_hr }}*0.72,
        color: "rgb(204,204,204)",
        evaluate : evaluate
    }
    var constraint2 = {
        threshold: {{ max_hr }}*0.82,
        color: "rgb(51,102,255)",
        evaluate : evaluate
    }
    var constraint3 = {
        threshold: {{ max_hr }}*0.87,
        color: "rgb(102,204,0)",
        evaluate : evaluate
    }
    var constraint4 = {
        threshold: {{ max_hr }}*0.92,
        color: "rgb(255,153,0)",
        evaluate : evaluate
    }
    var constraint5 = {
        threshold: {{ max_hr }}*0.97,
        color: "rgb(255,0,0)",
        evaluate : evaluate
    }
    datasets = {{ datasets }};
    GraphPlotter.init(datasets);
</script>

