{% load i18n %}
{% load turan_extras %}
<table class="fullsize">
    <tr>
        <th>
            {% trans "Zoom" %}
        </th>
        <th>
            {% trans "Start" %}
        </th>
        <th>
            {% trans "Duration" %}
        </th>
        {% if object.avg_speed %}
        <th>
            {% trans "Length" %}
        </th>
        <th>
            {% trans "Elevation" %}
        </th>
        <th>
            {% trans "Speed" %}
        </th>
        {% endif %}
        {% if object.avg_power and power_show%}
        <th>
            {% trans "Avg power" %}
        </th>
        <th>
            {% trans "FTP %"%}
        </th>
        <th>
            {% trans "Avg power/kg" %}
        </th>
        <th> {% trans "Max power" %} </th>
        {% endif %}
        <th>
            {% trans "Avg HR" %}
        </th>
    </tr>
{% for interval in intervals %}
<tr id="row{{forloop.counter0}}">
        <td><img src="{{ MEDIA_URL }}pinax/img/silk/icons/zoom.png" alt="Zoom" id="izoom{{forloop.counter0}}-link-1" class="zoom-select" />
<script type="text/javascript">
$(function () {
$('#izoom{{forloop.counter0}}-link-1').bind("click", 
        function (evt) { 
        plot.setSelection({ 
            xaxis: { 
            {% if time_xaxis %}
                from: {{interval.get_relative_time_in_minutes}}, to: {{ interval.get_relative_time_in_minutes}} +  {{interval.duration}} / 60
            {% else %}
                from: {{interval.start}}/1000, to: ({{interval.start}}+{{interval.distance}})/1000
            {% endif %}
            }
        })
        });

$('#row{{forloop.counter0}}').css('background-color', colors[{{interval.get_zone}}].replace("rgb", "rgba").replace(")", ", 0.5)"));
});


</script>
        </td>
        <td>{{ interval.start_time|time:"H:i" }} </td>
        <td>{{interval.duration|durationformatshort}}</td>
        {% if object.avg_speed %}
        <td>{{ interval.distance|floatformat }} {% trans "m" %} </td>
        <td>+{{ interval.ascent}}/-{{ interval.descent }} {% trans "m" %} </td>
        <td>{{interval.avg_speed|floatformat}} {% trans "km/h" %}</td>
        {% endif %}
        {% if interval.avg_power and power_show %}
        <td> {{interval.avg_power|floatformat}} {% trans "W" %} </td>
        <td> {{interval.get_ftp_percentage|floatformat}} {% trans "%" %} </td>
        <td>{{interval.get_avg_power_per_kg|floatformat}} {% trans "W/kg" %} </td>
        <td> {{interval.max_power|floatformat}} {% trans "W" %} </td>
        {% endif %}
        <td>
            {% if object.user.get_profile.max_hr %}
            {{ interval.avg_hr|percent:object.user.get_profile.max_hr }}
            {% else %}
            {{interval.avg_hr|floatformat}} {% trans "BPM" %}
            {% endif %} </td>
    </tr>
{% endfor %}
</table>
