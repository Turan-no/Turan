{% extends "turan/base.html" %}
{% load threadedcommentstags %}
{% load avatar_tags %}
{% load tagging_tags %}
{% load webdesign %}

{% load humanize %}
{% load i18n %}
{% load turan_extras %}
{% block title %}
{{ block.super }}
{% trans "What matters" %}
{% endblock %}
{% block content %}

<div class="half floatright">
    <h2>
        <a href="{% url exercises %}">{% trans "Latest exercises" %}</a>
    </h2>
    <ul class="trips">
        {% for object in exercise_list %}
        <li class="{% cycle "even" "odd" %}">
            <a href="{{ object.get_absolute_url }}">
                <img alt="User image" class="floatleft" src="{{ object.icon|safe }}" width="32" height="32" />
            </a>
            <a class="floatright" href="{{object.user.get_profile.get_absolute_url }}">{% avatar object.user 30 %}</a>
            <a href="{{ object.get_absolute_url }}">
                {{ object|slice:":35" }}
            </a>
            <p class="smaller fade">
                {% if object.route.distance %}
                    {{ object.route.distance|floatformat }} {% trans "km" %}
                {% endif %}
                {% if object.duration %}
                    {{ object.duration}}
                {% endif %}
                {{ object.date|naturalday}}
            </p>
            <hr class="clearright" />
        </li>
        {%endfor %}
    </ul>

    <h2>
        <a href="{% url routes %}">{% trans "Most popular routes" %}</a>
    </h2>
    <ul class="routes">
        {% for object in route_list %}
        <li class="{% cycle "even" "odd" %}">
            {% comment %}
            Silly SVG
                {% if object.gpx_file %}
                    <object width="50" height="50" type="image/svg+xml" data="{{ object.get_svg_url }}"></object>
                {% endif %}
            {% endcomment %}

            <div style="height: 32px; width: 32px; margin-right: 13px; color: #999; background-color: #eee; float: left">
                <p style="font-size: 14px; color: #888; width: 32px; text-align: center; float: left; padding: 0; margin: 2px 0 0 0">
                    {{ object.tcount }}
                </p>
                <p style="width: 32px; text-align: center; float: left; font-size: 10px; padding: 0; margin: 0">
                    turer
                </p>
                <hr class="clearleft" />
            </div>
            <a href="{{ object.get_absolute_url }}">{{ object.name }}</a> 
            <p class="smaller fade">
                {% if object.distance %}
                    {{ object.distance|floatformat }} {% trans "km" %},
                {% endif %}
                {% if object.ascent %}
                {{ object.ascent }} {% trans "ascent" %},
                {% endif %}
                {% if object.description %}
                    {{ object.description|truncatewords:10 }}
                {% endif %}
            </p>
            <hr class="clearleft" />
        </li>
    {%endfor %}
    </ul>
</div>

<div class="half leftcol">
    <h1>
        {% trans "Welcome to Turan" %}.no!
    </h1>

    <ul class="buttons">
        <li style="float: left">
            <a href="{% url route_create %}">
                <img class="icons" src="{{ MEDIA_URL }}pinax/images/silk/icons/map_add.png" alt="{% trans "Add route" %}" />
                {% trans "Add route" %}
            </a>
        </li>
        <li style="float: left">
            <a href="{% url exercise_create %}">
                <img class="icons" src="{{ MEDIA_URL }}pinax/images/silk/icons/map_add.png" alt="{% trans "Add an exercise" %}" />
                {% trans "Add an exercise" %}
            </a>
        </li>
        <li>
            <a href="{% url import_data %}">
                <img class="icons" src="{{ MEDIA_URL }}pinax/images/silk/icons/map_add.png" alt="{% trans "Import exercise" %}" />
                {% trans "Import exercise" %}
            </a>
        </li>
    </ul>
    <br />
    <h2>{% trans "Top exercisers" %}</h2>
    <div id="exercisers">
        {% for exerciser in user_list %}
        {% if exerciser.exercise_set.count %}
        <a title="{{exerciser.username}}" href="{{exerciser.get_profile.get_absolute_url }}">{% avatar exerciser 60 %}</a>
        {% endif %}
        {% endfor %}
    </div>
    <br />
    <br />
    <div id="tabs">
        <ul>
            <li class="tab selected" id="tabs-select-1"><h3>{% trans "Turan?" %}</h3></li>
            <li class="tab" id="tabs-select-2"><h3>{% trans "Analyze" %}</h3></li>
            <li class="tab" id="tabs-select-3"><h3>{% trans "Map" %}</h3></li>
            <li class="tab" id="tabs-select-4"><h3>{% trans "Log" %}</h3></li>
        </ul>
        <div id="tabs-1" class="visible">
            <p>
            {% blocktrans %}
            Turan is a hobby project driven mostly by coffee and frozen pizzas, but also by xt, N`Grath and si-m1. It supports a variety of training computers, preferrably with a gps-module. If you want to, you can use several devices and combine it here, as long as you're able to retrieve the .tcx, .gpx, and/or .hrm from the device.
            {% endblocktrans %}
            </p>
            <h4>{% trans "The supported devices are" %}:</h4>
            <ul class="floatleft">
                <li class="floatleft" style="list-style-type: none">
                    <img alt="Garmin" src="{{ MEDIA_URL }}turan/garmin-edge-705.png" height="64" width="64" />
                    <a href="http://www.hardware.no/sok/?query=garmin+edge">Garmin Edge</a>
                </li>
                <li class="floatleft" style="list-style-type: none">
                    <img alt="Polar RS" src="{{ MEDIA_URL }}turan/polar.png" width="64" height="64" />
                    <a href="http://shopping.kelkoo.no/ctl/do/search?siteSearchQuery=polar+rs">Polar RS</a>
                </li>
            </ul>
            <hr class="clearleft" />
            <p>
            {% blocktrans %}
            Turan is currently categorized into cycletrips, hikes and other exercises. Spinning and other indoor activity ends up in the latter category. The system will retrieve some of the information directly from the file you provide, but you will have to enter the comment for the exercise, and maybe some tags to group it with other similar exercises, such as rainyday-trips, solo-trips, bunch-sprints, and trips you could've been without.
            {% endblocktrans %}
            </p>
        </div>
        <div id="tabs-2" class="">
            <img class="floatright" src="{{MEDIA_URL}}turan/graf-utsnitt.png" alt="Graph" />
            <p>
            {% blocktrans %}
            Provided you have one of the supported devices you can analyze your training, kilometre by kilometre, or minute by minute if distance isn't relevant. You can, again provided your device supports it, graph everything the device records. Speed, altitude, cadence, heart rate, power, the whole <a href="http://www.urbandictionary.com/define.php?term=shebang">shebang</a>. Obviously, analyzing means breaking down a complex issue into smaller parts, so zooming in on any part of any lenght is supported. Just click and mark an interesting part of the graph and drool on the immense depth of the data <strong>you</strong> have produced.
            {% endblocktrans %}
            </p>
            <hr class="clearright" />
        </div>
        <div id="tabs-3" class="">
            <img class="floatleft" src="{{MEDIA_URL}}turan/mapexample.png" alt="Graph" />
            <p>
            {% blocktrans %}
            The map serves two purposes for trips and hikes. First and foremost the function of showing where you've been. That one's easy. The second is the killer: intensities during the exercises are embedded in the trace of the trip. The intensity of your exercise is indicated by the color, showing where which parts of your trip was relatively speaking the hardest. The levels are also relative to the user's own max-pulse, so make sure yours is correct.
            {% endblocktrans %}
            </p>
            <hr class="clearleft" />
        </div>
        <div id="tabs-4" class="">
            <p>
            {% blocktrans %}
            What good is training without progress? After a while you might want to look at the trends of your training. Turan(tm) provides several. Apart from the silly BMI-tracking-feature, you can view (and compare) different runs of the same route, comparing everything, speed, cadence and heart rate. Turan(tm) will also graph the time-usage of a spesific route as a function of time. In your profile you can view your own progress in terms of average speed, BMI and resting pulse.
            {% endblocktrans %}
            </p>
        </div>
    </div>
    <script type="text/javascript">
        function selectTab(evt) {
            var id = evt.target.id ? evt.target.id : evt.target.parentNode.id;
            id = "tabs-" + id.split('-')[2];
            $('#tabs div.visible').removeClass('visible');
            $('#tabs div#' + id).addClass('visible');
            $('#tabs ul li').removeClass('selected');
            $(this).addClass('selected');
        }
        $('#tabs ul li.tab').each(function () {
            $(this).bind("click", selectTab);
        });
    </script>

    <hr class="clear" />
</div>
{% endblock content %}

{% block cloud %}
<div class="cloud">
    <ul>
{% for tag in tag_list %}
    {% ifnotequal tag.count 1 %}
        <li>
        <a class="tag-size-{{ tag.font_size }}" href="/tags/{{ tag.name }}">{{ tag.name }}</a>
        </li>
    {% endifnotequal %}
{% endfor %}
    </ul>
</div>
{% endblock %}

